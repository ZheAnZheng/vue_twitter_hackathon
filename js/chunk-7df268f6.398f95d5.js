(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7df268f6"],{"5fcd":function(e,r,t){"use strict";t("b65d")},b65d:function(e,r,t){},e80b:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("setting-layout",[t("div",{staticClass:"setting-container"},[t("BaseInput",{staticClass:"setting-input",attrs:{"form-items":e.formItems},on:{"after-over-name-length":e.handleOverLength}}),t("BaseButton",{staticClass:"setting-button",attrs:{position:"right",mode:"action",isDisabled:e.isProcessing},on:{handleClick:e.updateUserInfo}},[e._v("儲存")])],1)])},n=[],a=t("1da1"),i=t("5530"),o=(t("96cf"),t("b0c0"),t("caad"),t("2532"),t("fb6a"),t("ff6e")),u=t("1527"),c=t("a64c"),m=t("4cce"),f=t("c968"),d=t("2f62"),l={name:"SettingPage",components:{SettingLayout:o["a"],BaseInput:u["a"],BaseButton:c["a"]},data:function(){return{formItems:[{id:0,name:"帳號",value:"",isError:!1},{id:1,name:"名稱",value:"",isError:!1},{id:2,name:"Email",value:"",isError:!1},{id:3,name:"密碼",type:"password",value:"",isError:!1,isBlank:!1},{id:4,name:"密碼確認",type:"password",value:"",isError:!1,isBlank:!1}],isAuthenticated:!1,isProcessing:!1}},computed:Object(i["a"])({},Object(d["c"])(["currentUser"])),created:function(){this.setUser()},methods:{handleOverLength:function(){this.formItems[1].isError=!0},setUser:function(){this.isAuthenticated=!0,this.formItems[0].value="@"+this.currentUser.account,this.formItems[1].value=this.currentUser.name,this.formItems[2].value=this.currentUser.email},updateUserInfo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var t,s,n,a,i,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,e.isProcessing=!0,t=e.currentUser.id,s=e.formItems[3].value,n=e.formItems[4].value,a=e.formItems[0].value,i=new FormData,!1!==a.includes("@")){r.next=12;break}return f["b"].fireWarning('帳號開頭必需有"@"'),r.abrupt("return");case 12:if(1!==a.length){r.next=15;break}return f["b"].fireWarning("帳號空白，請填寫帳號"),r.abrupt("return");case 15:if(i.append("account",a.slice(1)),i.append("name",e.formItems[1].value),i.append("email",e.formItems[2].value),i.append("password",e.formItems[3].value),i.append("introduction",e.currentUser.introduction),i.append("avatar",e.currentUser.avatar),i.append("cover",e.currentUser.cover),s===n){r.next=28;break}return e.formItems[3].isError=!0,e.formItems[4].isError=!0,r.abrupt("return");case 28:e.formItems[3].isError=!1,e.formItems[4].isError=!1;case 30:if(!(e.formItems[1].value.length>50)){r.next=32;break}return r.abrupt("return");case 32:return r.next=34,m["a"].update({userId:t,formData:i});case 34:if(o=r.sent,u=o.data,"error"!==u.status||"Account should be unique."!==u.message){r.next=42;break}return console.log(u.message),e.formItems[0].isError=!0,r.abrupt("return");case 42:if("error"!==u.status||"Email should be unique."!==u.message){r.next=48;break}return console.log(u.message),e.formItems[2].isError=!0,r.abrupt("return");case 48:f["b"].fireSuccess("更新成功"),e.$router.push("/main");case 50:r.next=56;break;case 52:r.prev=52,r.t0=r["catch"](0),console.log("Error",r.t0),f["b"].fireError("目前無法修改設定，請稍後再試");case 56:return r.prev=56,e.isProcessing=!1,r.finish(56);case 59:case"end":return r.stop()}}),r,null,[[0,52,56,59]])})))()}}},p=l,v=(t("5fcd"),t("2877")),b=Object(v["a"])(p,s,n,!1,null,"031bbd50",null);r["default"]=b.exports},fb6a:function(e,r,t){"use strict";var s=t("23e7"),n=t("da84"),a=t("e8b5"),i=t("68ee"),o=t("861d"),u=t("23cb"),c=t("07fa"),m=t("fc6a"),f=t("8418"),d=t("b622"),l=t("1dde"),p=t("f36a"),v=l("slice"),b=d("species"),h=n.Array,g=Math.max;s({target:"Array",proto:!0,forced:!v},{slice:function(e,r){var t,s,n,d=m(this),l=c(d),v=u(e,l),I=u(void 0===r?l:r,l);if(a(d)&&(t=d.constructor,i(t)&&(t===h||a(t.prototype))?t=void 0:o(t)&&(t=t[b],null===t&&(t=void 0)),t===h||void 0===t))return p(d,v,I);for(s=new(void 0===t?h:t)(g(I-v,0)),n=0;v<I;v++,n++)v in d&&f(s,n,d[v]);return s.length=n,s}})}}]);
//# sourceMappingURL=chunk-7df268f6.398f95d5.js.map