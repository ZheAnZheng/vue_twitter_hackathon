(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35d324c9"],{"142a":function(e,t,r){},"15fd":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("a4d3"),r("b64b");function n(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function s(e,t){if(null==e)return{};var r,s,a=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}},"4c78":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"container"},[e.isLoading?r("BaseSpinner"):[e._l(e.tweets,(function(t){return r("li",{key:""+(Math.random()+t.id),staticClass:"tweet-item"},[r("router-link",{attrs:{to:{name:"userTweets",params:{id:t.UserId}}}},[r("img",{staticClass:"image",attrs:{src:e._f("imageFilter")(t.userAvatar)}})]),r("router-link",{attrs:{to:{name:"tweetStory",params:{id:t.id}}}},[r("div",{staticClass:"tweet-context"},[r("div",{staticClass:"tweet-info"},[r("router-link",{staticClass:"name",attrs:{to:{name:"userTweets",params:{id:t.UserId}}}},[e._v(e._s(t.userName))]),r("div",{staticClass:"account"},[e._v("@"+e._s(t.userAccount))]),r("div",{staticClass:"dot"},[e._v("．")]),r("div",{staticClass:"time"},[e._v(e._s(e._f("fromNow")(t.createdAt)))])],1),r("div",{staticClass:"tweet-content"},[r("p",[e._v(" "+e._s(t.description)+" ")])])])]),r("div",{staticClass:"tweet-relative"},[r("button",{staticClass:"message",on:{click:function(r){return e.$emit("openReplyModal",{tweet:t})}}},[r("svg",{attrs:{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M7.77881 0.40127L5.18631 0.39502H5.18506C2.45131 0.39502 0.310059 2.53689 0.310059 5.27127C0.310059 7.83252 2.30131 9.77502 4.97568 9.87752V12.27C4.97568 12.3375 5.00318 12.4488 5.05068 12.5219C5.13943 12.6625 5.29068 12.7388 5.44568 12.7388C5.53193 12.7388 5.61881 12.715 5.69693 12.665C5.86193 12.56 9.74256 10.0775 10.7519 9.22377C11.9407 8.21752 12.6519 6.74252 12.6538 5.27877V5.26814C12.6501 2.53877 10.5101 0.401269 7.77881 0.400644V0.40127ZM10.1457 8.50877C9.43693 9.10877 7.10693 10.6369 5.91318 11.4106V9.41877C5.91318 9.16002 5.70381 8.95002 5.44443 8.95002H5.19693C2.90943 8.95002 1.24818 7.40252 1.24818 5.27127C1.24818 3.06252 2.97818 1.33252 5.18568 1.33252L7.77756 1.33877H7.77881C9.98631 1.33877 11.7163 3.06752 11.7176 5.27377C11.7157 6.46752 11.1288 7.67627 10.1463 8.50877H10.1457Z",fill:"#657786"}})]),r("span",[e._v(e._s(e._f("emptyFilter")(t.repliedCount)))])]),t.isLiked?r("button",{staticClass:"like",class:{activeButton:e.isProcessingButton(t.id)},attrs:{disabled:e.isProcessing},on:{click:function(r){return e.deleteLike(t.id)}}},[r("svg",{attrs:{width:"22",height:"20",viewBox:"0 0 22 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M11 19.6381H10.986C8.40295 19.5901 0.949951 12.8561 0.949951 6.47812C0.949951 3.41412 3.47495 0.724121 6.35295 0.724121C8.64295 0.724121 10.183 2.30412 10.999 3.45412C11.813 2.30612 13.353 0.724121 15.644 0.724121C18.524 0.724121 21.048 3.41412 21.048 6.47912C21.048 12.8551 13.594 19.5891 11.011 19.6361H11V19.6381Z",fill:"#E0245E"}})]),r("span",{staticClass:"like-text"},[e._v(e._s(e._f("emptyFilter")(t.likedCount)))])]):r("button",{staticClass:"like",class:{activeButton:e.isProcessingButton(t.id)},attrs:{disabled:e.isProcessing},on:{click:function(r){return e.addLike(t.id)}}},[r("svg",{attrs:{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M6.5 12.5236H6.49125C4.87687 12.4936 0.21875 8.28489 0.21875 4.29864C0.21875 2.38364 1.79687 0.702393 3.59562 0.702393C5.02687 0.702393 5.98937 1.68989 6.49937 2.40864C7.00812 1.69114 7.97062 0.702393 9.4025 0.702393C11.2025 0.702393 12.78 2.38364 12.78 4.29927C12.78 8.28427 8.12125 12.493 6.50687 12.5224H6.5V12.5236ZM3.59625 1.64052C2.29625 1.64052 1.15687 2.88302 1.15687 4.29989C1.15687 7.88739 5.55312 11.5474 6.50062 11.5861C7.44937 11.5474 11.8444 7.88802 11.8444 4.29989C11.8444 2.88302 10.705 1.64052 9.405 1.64052C7.825 1.64052 6.9425 3.47552 6.935 3.49364C6.79125 3.84489 6.2125 3.84489 6.06812 3.49364C6.05937 3.47489 5.1775 1.64052 3.59687 1.64052H3.59625Z",fill:"#657786"}})]),r("span",[e._v(e._s(e._f("emptyFilter")(t.likedCount)))])])])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:!e.tweets.length,expression:"!tweets.length"}],staticClass:"tweet-item"},[r("div",{staticClass:"no-data-item"},[e._v("暫無推文資料")])])]],2)},s=[],a=r("5530"),i=r("15fd"),c=r("1da1"),o=(r("96cf"),r("b0c0"),r("d9e2"),r("d81d"),r("a4d3"),r("e01a"),r("2708")),u=r("7b95"),l=r("6783"),d=r("4cce"),w=r("c968"),p=["User"],v=["Tweet"],f=["User"],h={mixins:[o["d"],o["c"]],components:{BaseSpinner:u["a"]},created:function(){var e=this.$route.name,t=this.$route.params.id;"main"===e?this.fetchIndexTweets():"userTweets"===e?this.fetchUserTweets(t):"likeTweets"===e&&this.fetchUserLikeTweets(t)},data:function(){return{tweets:[],isLoading:!0,isProcessing:!1,prcessingTweetId:0}},watch:{$route:function(e){var t=e.params.id;this.isLoading=!0,"userTweets"===e.name?this.fetchUserTweets(t):"likeTweets"===e.name&&this.fetchUserLikeTweets(t)}},methods:{fetchUserTweets:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.tryFetchUserTweets(e);case 3:t.isLoading=!1,r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](0),w["b"].fireError("無法存取資料"),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()},fetchUserLikeTweets:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.tryFetchUserLikeTweets(e);case 3:t.isLoading=!1,r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log(r.t0),w["b"].fireError("無法讀取喜歡過推文");case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()},fetchIndexTweets:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.tryFetchIndex();case 3:e.isLoading=!1,t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0),w["b"].fireError("無法讀取主頁");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},addLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,t.prcessingTweetId=e,r.next=5,t.tryAddLike(e);case 5:r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0),w["b"].fireError("無法加入喜歡");case 11:return r.prev=11,t.isProcessing=!1,t.prcessingTweetId=0,r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[0,7,11,15]])})))()},deleteLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,t.prcessingTweetId=e,r.next=5,t.tryDeleteLike(e);case 5:r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0),w["b"].fireError("無法取消喜歡");case 11:return r.prev=11,t.isProcessing=!1,t.prcessingTweetId=0,r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[0,7,11,15]])})))()},isProcessingButton:function(e){return e===this.prcessingTweetId},tryFetchUserTweets:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].getTweets({userId:e});case 3:if(n=r.sent,"OK"===n.statusText){r.next=6;break}throw Error(n.data.message);case 6:t.tweets=n.data.map((function(e){var t=e.User,r=Object(i["a"])(e,p);return Object(a["a"])({userAccount:t.account,userAvatar:t.avatar,userName:t.name},r)})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},tryFetchUserLikeTweets:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,d["a"].getlikeTweets({userId:e});case 4:if(n=r.sent,"OK"===n.statusText){r.next=7;break}throw new Error(n.data.message);case 7:t.tweets=n.data.map((function(e){var t=e.Tweet,r=Object(i["a"])(e,v),n=t.User;return{id:r.TweetId,createdAt:r.createdAt,likedCount:t.likedCount,repliedCount:t.repliedCount,updatedAt:r.updatedAt,userAccount:n.account,userAvatar:n.avatar,userName:n.name,UserId:r.UserId,description:t.description,isLiked:r.likedTweet}})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.loge;case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},tryFetchIndex:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].getAll();case 3:if(r=t.sent,"OK"===r.statusText){t.next=6;break}throw Error(r.data.message);case 6:e.tweets=r.data.map((function(e){var t=e.User,r=Object(i["a"])(e,f);return Object(a["a"])({userAccount:t.account,userAvatar:t.avatar,userName:t.name},r)})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},tryAddLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l["a"].addLike({tweetId:e});case 3:if(n=r.sent,"OK"===n.statusText){r.next=6;break}throw Error(n.data.message);case 6:t.tweets=t.tweets.map((function(t){return t.id===e?Object(a["a"])(Object(a["a"])({},t),{},{isLiked:!0,likedCount:t.likedCount+1}):t})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},tryDeleteLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l["a"].deleteLike({tweetId:e});case 3:if(n=r.sent,"OK"===n.statusText){r.next=6;break}throw Error(n.data.message);case 6:t.tweets=t.tweets.map((function(t){return t.id===e?Object(a["a"])(Object(a["a"])({},t),{},{isLiked:!1,likedCount:t.likedCount-1}):t})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}},filters:{emptyFilter:function(e){return e||0}}},m=h,g=(r("e17b"),r("2877")),k=Object(g["a"])(m,n,s,!1,null,"f1c21870",null);t["default"]=k.exports},"5e34":function(e,t,r){"use strict";r("b8ae")},"7b95":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"ball-box"},[r("div"),r("div"),r("div"),r("div"),r("div"),r("div"),r("div")])])}],a=(r("5e34"),r("2877")),i={},c=Object(a["a"])(i,n,s,!1,null,"f131ec16",null);t["a"]=c.exports},b8ae:function(e,t,r){},e17b:function(e,t,r){"use strict";r("142a")}}]);
//# sourceMappingURL=chunk-35d324c9.3d994112.js.map