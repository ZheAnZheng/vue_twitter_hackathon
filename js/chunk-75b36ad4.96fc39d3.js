(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75b36ad4","chunk-8c2a0790"],{"0b0f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("header",{staticClass:"header"},[e._v("公開聊天室")]),a("div",{staticClass:"chatroom-body"},[a("ul",{staticClass:"message-list"},e._l(e.chatData,(function(t){return a("li",{key:t.id,staticClass:"message-item"},[a("div",{class:{message:"message"===t.type,notify:"notice"===t.type}},["notice"===t.type?a("div",{staticClass:"notify-content"},[e._v(" "+e._s(t.text)+" ")]):a("div",{staticClass:"message-wrapper",class:[e.currentUser.id===t.userId?"own":"other"]},[e.isCurrentUser(t.userId)?e._e():a("img",{staticClass:"image",attrs:{src:e._f("imageFilter")(t.userAvatar)}}),a("div",[a("div",{staticClass:"message-text",class:{"own-text":e.isCurrentUser(t.userId)}},[e._v(" "+e._s(t.text)+" ")]),a("div",{staticClass:"message-time",class:{"own-time":e.isCurrentUser(t.userId)}},[e._v(" 1:00 ")])])])])])})),0),a("div",{staticClass:"message-bar"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"message-input",attrs:{placeholder:"輸入訊息..."},domProps:{value:e.message},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sentMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.message=t.target.value)}}}),a("svg",{attrs:{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:e.sentMessage}},[a("path",{attrs:{d:"M19.13 9.35798L1.614 0.107979C1.324 -0.0440207 0.974 0.00597923 0.741 0.233979C0.511 0.459979 0.448001 0.810979 0.591001 1.10198L4.953 10.022L0.591001 18.942C0.448001 19.234 0.511 19.585 0.741 19.81C0.886 19.95 1.074 20.022 1.264 20.022C1.384 20.022 1.504 19.994 1.614 19.935L19.131 10.685C19.376 10.555 19.531 10.299 19.531 10.021C19.531 9.74298 19.376 9.48898 19.131 9.35898L19.13 9.35798ZM2.948 2.50998L15.752 9.27198H6.255L2.948 2.51198V2.50998ZM6.255 10.77H15.753L2.948 17.535L6.255 10.772V10.77Z",fill:"#FF6600"}})])])])])},r=[],n=a("5530"),i=(a("b0c0"),a("2f62")),c=a("ec26"),o=a("2708"),u={mixins:[o["d"]],computed:Object(n["a"])({},Object(i["c"])(["currentUser"])),props:{chatData:{type:Array,required:!1}},mounted:function(){var e=document.querySelector(".message-list");e.lastChild&&e.lastElementChild.scrollIntoView()},updated:function(){var e=document.querySelector(".message-list");e.lastChild&&e.lastElementChild.scrollIntoView()},data:function(){return{messageData:[],message:""}},methods:{isCurrentUser:function(e){return this.currentUser.id===e},sentMessage:function(){var e={id:Object(c["a"])(),type:"message",userId:this.currentUser.id,userName:this.currentUser.name,userAvatar:this.currentUser.avatar,message:this.message,createdAt:"1:00"};this.$emit("sent-message",e),this.message=""}}},l=u,d=(a("a631"),a("2877")),f=Object(d["a"])(l,s,r,!1,null,"ce33f05c",null);t["default"]=f.exports},"0e21":function(e,t,a){},"5bd7":function(e,t,a){"use strict";a("a7a3")},6322:function(e,t,a){"use strict";a("df74")},7194:function(e,t,a){},a631:function(e,t,a){"use strict";a("7194")},a7a3:function(e,t,a){},b71b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("hackathonLayout",{scopedSlots:e._u([{key:"right-side",fn:function(){return[a("div",{staticClass:"public-room"},[a("ChatRoom",{attrs:{chatData:e.chatData},on:{"sent-message":e.sentMessage}})],1)]},proxy:!0}])},[[a("div",{staticClass:"online-bar"},[a("ChatSidebar")],1)]],2)},r=[],n=a("1da1"),i=(a("96cf"),a("d9e2"),a("d3b7"),a("159b"),a("b0c0"),a("eafe")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("header",{staticClass:"header"},[e._v("上線使用者")]),a("ul",e._l(e.users,(function(t){return a("li",{key:t.id,staticClass:"list-card"},[a("img",{attrs:{src:e._f("imageFilter")(t.avatar)}}),a("div",{staticClass:"name"},[e._v(e._s(t.name))]),a("div",{staticClass:"account"},[e._v("@"+e._s(t.account))])])})),0)])},o=[],u=a("2708"),l={mixins:[u["d"]],data:function(){return{users:[{id:1,name:"apple",avatar:"",account:"apple"},{id:2,name:"apple",avatar:"",account:"apple"},{id:3,name:"apple",avatar:"",account:"apple"},{id:4,name:"apple",avatar:"",account:"apple"}]}}},d=l,f=(a("5bd7"),a("2877")),m=Object(f["a"])(d,c,o,!1,null,"fb6947d0",null),p=m.exports,h=a("0b0f"),v=a("c968"),g={getPublic:function(){return v["a"].get("/messages/public")},getPrivate:function(e){var t=e.roomId;return v["a"].get("/privateMessages/".concat(t))}},b=a("29b2"),C=a("ec26"),y={components:{HackathonLayout:i["a"],ChatSidebar:p,ChatRoom:h["default"]},data:function(){return{chatData:[]}},created:function(){this.fetchHistoryChat()},mounted:function(){b["a"].onChatMessage(this.recieveMessage),b["a"].emitJoin(),b["a"].onJoin(this.recieveJoin)},methods:{sentMessage:function(e){var t=e.message;b["a"].emitChatMessage(t)},recieveMessage:function(e){this.chatData.push(e)},recieveJoin:function(e){this.chatData.push({id:Object(C["a"])(),type:e.type,text:e.message})},fetchHistoryChat:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.getPublic();case 3:if(a=t.sent,"OK"===a.statusText){t.next=6;break}throw new Error("wrong response");case 6:a.data.forEach((function(t){e.chatData.push({id:Object(C["a"])(),userId:t.User.id,text:t.content,createdAt:t.createdAt,userName:t.User.name,userAvatar:t.User.avatar,type:"message"})})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),v["b"].fireError("取得訊息記錄");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},w=y,_=(a("bfb2"),Object(f["a"])(w,s,r,!1,null,"77c1e999",null));t["default"]=_.exports},bfb2:function(e,t,a){"use strict";a("0e21")},df74:function(e,t,a){},eafe:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hachathon-container"},[a("Navbar"),a("MobileNavbar"),a("div",{staticClass:"middle-slot"},[e._t("default")],2),a("div",{staticClass:"right-slot"},[e._t("right-side")],2)],1)},r=[],n=a("d178"),i=a("6ea3"),c={components:{Navbar:n["a"],MobileNavbar:i["a"]}},o=c,u=(a("6322"),a("2877")),l=Object(u["a"])(o,s,r,!1,null,"140bea6f",null);t["a"]=l.exports},ec26:function(e,t,a){"use strict";var s,r=new Uint8Array(16);function n(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(r)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function c(e){return"string"===typeof e&&i.test(e)}for(var o=c,u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!o(a))throw TypeError("Stringified UUID is invalid");return a}var f=d;function m(e,t,a){e=e||{};var s=e.random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){a=a||0;for(var r=0;r<16;++r)t[a+r]=s[r];return t}return f(s)}t["a"]=m}}]);
//# sourceMappingURL=chunk-75b36ad4.96fc39d3.js.map